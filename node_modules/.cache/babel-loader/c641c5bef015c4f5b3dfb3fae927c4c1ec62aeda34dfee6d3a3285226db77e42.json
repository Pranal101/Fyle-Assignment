{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/prana/OneDrive/Desktop/assignment_project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/prana/OneDrive/Desktop/assignment_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/prana/OneDrive/Desktop/assignment_project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Header from\"./Header\";import axios from\"axios\";import SearchIcon from\"@material-ui/icons/Search\";import ClearIcon from\"@material-ui/icons/Clear\";function LibraryApp(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchText=_useState4[0],setSearchText=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),offset=_useState6[0],setOffset=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalBooks=_useState8[0],setTotalBooks=_useState8[1];var _useState9=useState([\"History\",\"Science\",\"Fiction\",\"Biography\",\"Mystery\"]),_useState10=_slicedToArray(_useState9,2),popularSubjects=_useState10[0],setPopularSubjects=_useState10[1];useEffect(function(){// Fetch popular books\nfetchPopularBooks();},[]);// Function to search books by title or author\nvar searchBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchTerm){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://www.googleapis.com/books/v1/volumes?q=\".concat(searchTerm,\"&startIndex=\").concat(offset,\"&maxResults=10\"));case 3:response=_context.sent;setBooks(response.data.items);setTotalBooks(response.data.totalItems);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function searchBooks(_x){return _ref.apply(this,arguments);};}();// Function to fetch popular books by subject\nvar fetchPopularBooks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(subject){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"https://www.googleapis.com/books/v1/volumes?q=subject:\".concat(subject,\"&maxResults=10\"));case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.data.items);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchPopularBooks(_x2){return _ref2.apply(this,arguments);};}();var handleClear=function handleClear(){setBooks(\"\");setSearchText([]);setOffset(0);};// Function to handle search input change\nvar handleSearchChange=function handleSearchChange(event){setSearchText(event.target.value);};// Function to handle search submit\nvar handleSearchSubmit=function handleSearchSubmit(event){event.preventDefault();setOffset(0);searchBooks(searchText);};// Function to handle pagination\nvar handlePagination=function handlePagination(newOffset){setOffset(newOffset);searchBooks(searchText);};// Function to handle popular subject click\nvar handlePopularSubjectClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(subject){var popularBooks;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetchPopularBooks(subject);case 2:popularBooks=_context3.sent;setBooks(popularBooks);setSearchText(subject);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function handlePopularSubjectClick(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"form\",{className:\"search-box\",onSubmit:handleSearchSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Search book\",value:searchText,onChange:handleSearchChange}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},/*#__PURE__*/React.createElement(SearchIcon,null)),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleClear},/*#__PURE__*/React.createElement(ClearIcon,null))),books.length>0&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"small_heading\"},\"Showing \",offset+1,\"-\",offset+books.length,\" results\"),/*#__PURE__*/React.createElement(\"ul\",null,books.map(function(book){return/*#__PURE__*/React.createElement(\"li\",{key:book.id},book.volumeInfo.title);})),offset>0&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handlePagination(offset-10);}},\"Previous\"),offset+books.length<totalBooks&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handlePagination(offset+10);}},\"Next\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"head_text\"},\"Popular Subjects\"),/*#__PURE__*/React.createElement(\"ul\",null,popularSubjects.map(function(subject){return/*#__PURE__*/React.createElement(\"li\",{key:subject,onClick:function onClick(){return handlePopularSubjectClick(subject);}},subject);}))));}export default LibraryApp;","map":{"version":3,"names":["React","useState","useEffect","Header","axios","SearchIcon","ClearIcon","LibraryApp","_useState","_useState2","_slicedToArray","books","setBooks","_useState3","_useState4","searchText","setSearchText","_useState5","_useState6","offset","setOffset","_useState7","_useState8","totalBooks","setTotalBooks","_useState9","_useState10","popularSubjects","setPopularSubjects","fetchPopularBooks","searchBooks","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","searchTerm","response","wrap","_callee$","_context","prev","next","get","concat","sent","data","items","totalItems","t0","console","log","stop","_x","apply","arguments","_ref2","_callee2","subject","_callee2$","_context2","abrupt","_x2","handleClear","handleSearchChange","event","target","value","handleSearchSubmit","preventDefault","handlePagination","newOffset","handlePopularSubjectClick","_ref3","_callee3","popularBooks","_callee3$","_context3","_x3","createElement","className","onSubmit","type","placeholder","onChange","onClick","length","map","book","key","id","volumeInfo","title"],"sources":["C:/Users/prana/OneDrive/Desktop/assignment_project/src/components/LibraryApp.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Header from \"./Header\";\r\nimport axios from \"axios\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\n\r\nfunction LibraryApp() {\r\n  const [books, setBooks] = useState([]);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [offset, setOffset] = useState(0);\r\n  const [totalBooks, setTotalBooks] = useState(0);\r\n  const [popularSubjects, setPopularSubjects] = useState([\r\n    \"History\",\r\n    \"Science\",\r\n    \"Fiction\",\r\n    \"Biography\",\r\n    \"Mystery\"\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    // Fetch popular books\r\n    fetchPopularBooks();\r\n  }, []);\r\n\r\n  // Function to search books by title or author\r\n  const searchBooks = async (searchTerm) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://www.googleapis.com/books/v1/volumes?q=${searchTerm}&startIndex=${offset}&maxResults=10`\r\n      );\r\n      setBooks(response.data.items);\r\n      setTotalBooks(response.data.totalItems);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // Function to fetch popular books by subject\r\n  const fetchPopularBooks = async (subject) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://www.googleapis.com/books/v1/volumes?q=subject:${subject}&maxResults=10`\r\n      );\r\n      return response.data.items;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const handleClear = () => {\r\n    setBooks(\"\");\r\n    setSearchText([]);\r\n    setOffset(0);\r\n  };\r\n\r\n  // Function to handle search input change\r\n  const handleSearchChange = (event) => {\r\n    setSearchText(event.target.value);\r\n  };\r\n\r\n  // Function to handle search submit\r\n  const handleSearchSubmit = (event) => {\r\n    event.preventDefault();\r\n    setOffset(0);\r\n    searchBooks(searchText);\r\n  };\r\n\r\n  // Function to handle pagination\r\n  const handlePagination = (newOffset) => {\r\n    setOffset(newOffset);\r\n    searchBooks(searchText);\r\n  };\r\n\r\n  // Function to handle popular subject click\r\n  const handlePopularSubjectClick = async (subject) => {\r\n    const popularBooks = await fetchPopularBooks(subject);\r\n    setBooks(popularBooks);\r\n    setSearchText(subject);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header />\r\n      <form className=\"search-box\" onSubmit={handleSearchSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search book\"\r\n          value={searchText}\r\n          onChange={handleSearchChange}\r\n        />\r\n        <button type=\"submit\">\r\n          <SearchIcon />\r\n        </button>\r\n        <button type=\"button\" onClick={handleClear}>\r\n          <ClearIcon />\r\n        </button>\r\n      </form>\r\n      {books.length > 0 && (\r\n        <div>\r\n          <p className=\"small_heading\">\r\n            Showing {offset + 1}-{offset + books.length} results\r\n          </p>\r\n          <ul>\r\n            {books.map((book) => (\r\n              <li key={book.id}>{book.volumeInfo.title}</li>\r\n            ))}\r\n          </ul>\r\n          {offset > 0 && (\r\n            <button onClick={() => handlePagination(offset - 10)}>\r\n              Previous\r\n            </button>\r\n          )}\r\n          {offset + books.length < totalBooks && (\r\n            <button onClick={() => handlePagination(offset + 10)}>Next</button>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div>\r\n        <h2 className=\"head_text\">Popular Subjects</h2>\r\n        <ul>\r\n          {popularSubjects.map((subject) => (\r\n            <li\r\n              key={subject}\r\n              onClick={() => handlePopularSubjectClick(subject)}\r\n            >\r\n              {subject}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LibraryApp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}